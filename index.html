<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solarwind-Plasma-Daten und Substurm-Kopplungsindex</title>
    <!-- Tailwind CSS laden -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <h1 class="text-3xl md:text-4xl font-extrabold mb-2 text-blue-400">
            Solarwind-Plasma-Daten (L1-Punkt)
        </h1>
        <p class="text-lg mb-6 text-gray-400">
            Daten der NOAA SWPC (Plasma und Magnetfeld) mit berechneter gesch√§tzter Ankunftszeit und Substurm-Kopplungsindex.
        </p>

        <!-- Echtzeit-Statuskarte (Zeigt die Auswirkung des L1-Pakets) -->
        <div id="current-status-card" class="mb-8 status-card-grid">
            <div class="status-metric">
                <p class="text-sm uppercase text-gray-400">Neuster Messwert (L1)</p>
                <p id="latest-time-tag" class="metric-value text-gray-300">-</p>
            </div>
            <div class="status-metric">
                <p class="text-sm uppercase text-gray-400">Gesch. Ankunft (Erde)</p>
                <p id="arrival-time-status" class="metric-value text-blue-400">-</p>
            </div>
            <div class="status-metric">
                <p class="text-sm uppercase text-gray-400">Prog. AL-Index (nT)</p>
                <p id="al-index-status" class="metric-value text-gray-300">-</p>
            </div>
            <div class="status-metric">
                <p class="text-sm uppercase text-gray-400">Substurm-Risiko (SCI)</p>
                <p id="sci-risk-status" class="metric-value text-gray-300">-</p>
            </div>
        </div>
        
        <!-- Status- und Ladeanzeige -->
        <div id="status-message" class="text-center p-4 my-4 bg-gray-800 rounded-lg shadow-lg hidden"></div>
        <div id="loading-indicator" class="flex justify-center items-center p-8">
            <div class="loading-animation"></div>
            <span class="ml-4 text-xl text-blue-400">Daten werden geladen...</span>
        </div>

        <!-- Tabelle f√ºr die Daten -->
        <div id="data-container" class="overflow-x-auto">
            <table id="plasma-table" class="min-w-full bg-gray-800 rounded-lg shadow-2xl hidden">
                <thead>
                    <tr class="bg-blue-600/80 text-white uppercase text-sm leading-normal">
                        <!-- Plasmadaten & Zeiten -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="time_tag">
                            Messzeitpunkt (L1)
                            <span data-sort-icon="time_tag" class="ml-1">‚Üì</span>
                        </th>
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="speed">
                            Geschw. (km/s)
                            <span data-sort-icon="speed" class="ml-1"></span>
                        </th>
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="density">
                            Dichte (p/cm¬≥)
                            <span data-sort-icon="density" class="ml-1"></span>
                        </th>
                        <!-- Dynamischer Druck -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="dynamic_pressure_npa">
                            Dyn. Druck (nPa)
                            <span data-sort-icon="dynamic_pressure_npa" class="ml-1"></span>
                        </th>
                        <!-- Magnetfelddaten -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="total_bt">
                            Total Bt (nT)
                            <span data-sort-icon="total_bt" class="ml-1"></span>
                        </th>
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="bz_nt">
                            Bz (nT)
                            <span data-sort-icon="bz_nt" class="ml-1"></span>
                        </th>
                         <!-- Prog. AL-Index NEUE SPALTE -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="prog_al_index">
                            Prog. AL-Index (nT)
                            <span data-sort-icon="prog_al_index" class="ml-1"></span>
                        </th>
                        <!-- SCI -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="substorm_coupling_index">
                            ‚ö° SCI (V¬∑Bs)
                            <span data-sort-icon="substorm_coupling_index" class="ml-1"></span>
                        </th>
                        <!-- Gesch√§tzte Sturmbeginn-Zeit -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="estimated_onset_time">
                            Gesch. Sturmbeginn (UTC)
                            <span data-sort-icon="estimated_onset_time" class="ml-1"></span>
                        </th>
                        <!-- Substurm-Risiko -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="sci_risk_level">
                            Risiko-Level
                            <span data-sort-icon="sci_risk_level" class="ml-1"></span>
                        </th>
                        <!-- Ankunftszeit -->
                        <th class="py-3 px-6 text-left header-cell" data-sort-key="arrival_time">
                            Gesch. Ankunftszeit (Erde)
                            <span data-sort-icon="arrival_time" class="ml-1"></span>
                        </th>
                    </tr>
                </thead>
                <tbody id="table-body" class="text-gray-300 text-sm font-light">
                    <!-- Daten werden hier durch JavaScript eingef√ºgt -->
                </tbody>
            </table>
        </div>

        <p class="mt-6 text-xs text-gray-500">
            <span class="font-bold text-blue-400">Hervorgehobene Zeilen</span> (blaue Markierung) sind bereits auf der Erde **angekommen**.<br>
            <span class="font-bold text-pink-400">Prog. AL-Index (nT)</span>: **Prognostizierter Auroral Lower Index.** Dieser Index quantifiziert die St√§rke des Auroralen Elektrojets. Ein **negativer, gr√∂√üerer** Wert (z. B. $<-500\text{ nT}$) deutet auf eine **hohe Substorm-Aktivit√§t** hin. <br>
            <span class="font-bold text-blue-300">üîú</span> in der Ankunftszeit: Der Solarwind wird **innerhalb der n√§chsten 30 Minuten** erwartet.<br>
            <span class="font-bold text-pink-400">üèéÔ∏è √úBERHOLT!</span>: Ein sp√§ter gemessener Plasmaabschnitt wird **fr√ºher** erwartet, was auf eine **Geschwindigkeitsfront** hindeutet.<br>
            <span class="font-bold text-yellow-300">Total Bt (nT)</span>: Der **Gesamtwert** des Magnetfelds. Werte **√ºber $15\text{ nT}$** sind hoch (oft assoziiert mit Sto√üwellen).
            <br><span class="font-bold text-red-400">‚¨áÔ∏è Bz</span>: Zeigt die **S√ºdrichtung** des Magnetfelds an, ein kritischer Indikator f√ºr geomagnetische Aktivit√§t und Subst√ºrme. **(Dies ist die wichtigste Information, die einem Boden-Magnetometer-Index vorausgeht)**<br>
            <span class="font-bold text-yellow-300">üí• STAU! Dyn. Druck</span>: Zeigt eine **starke Kompressionszone (SIR/Sto√üwelle)** an (Dichte > $15\text{ p/cm}^3$ und Druck > $5\text{ nPa}$).<br>
            <span class="font-bold text-red-400">Dyn. Druck (nPa)</span>: Werte **√ºber $10\text{ nPa}$** sind stark erh√∂ht und deuten auf eine erhebliche Magnetosph√§ren-Kompression hin.<br>
            <span class="font-bold text-red-400">üö® SCI (V¬∑Bs)</span>: Hohe Werte (**> 3500**) signalisieren ein **hohes Potenzial f√ºr Subst√ºrme** (starke Polarlichter).
            <br><span class="font-bold text-red-300">‚ö†Ô∏è Gesch. Sturmbeginn</span>: Die **gesch√§tzte fr√ºheste Zeit** f√ºr den **Beginn des geomagnetischen Sturms** (Ankunft + Aufbauzeit).
            <br>Hinweis: Die Daten werden vom NOAA Space Weather Prediction Center (SWPC) bereitgestellt und am L1-Punkt gemessen. Die Tabelle wird jede Minute automatisch aktualisiert.
        </p>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
